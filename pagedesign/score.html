
<html>
  <head>
    <script src="http://www.verovio.org/javascript/latest/verovio-toolkit-wasm.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.min.js"></script>
  </head>
  <body>
    <button id="saveMEI">Save my MEI!</button>
    <div id="notation"></div>
    <script>
        document.addEventListener("DOMContentLoaded", (event) => {
            verovio.module.onRuntimeInitialized = function () {
                // This line initializes the Verovio toolkit
                const tk = new verovio.toolkit();

                document.getElementById("saveMEI").addEventListener("click", (event) => {
                    let meiContent = tk.getMEI();
                    var myBlob = new Blob([meiContent], {type: "application/xml"});
                    saveAs(myBlob, "meifile.mei");
                });

                fetch("assets/score/32_Variations_in_C_minor_WoO_80(Henle).xml")
                    .then( (response) => response.text() )
                    .then( (meiXML) => {
                        tk.loadData(meiXML);
                        let svg = tk.renderToSVG(1);
                        document.getElementById("notation").innerHTML = svg;

                        // Get all the rests by selecting <g> with attribute class 'rest' ...
                        let rests = document.querySelectorAll('g.rest');
                        // ... and change their color by setting their style.fill value
                        for (let rest of rests) {
                            rest.style.fill = "dodgerblue";
                        }

                        // Get all the notes and change first note
                        let notes = document.querySelectorAll("g.note");
                        notes[0].style.fill = 'aqua';
                        notes[3].style.fill = 'aqua';
                    }).catch(e => {
                        console.log("An error occurred when loading the file!");
                        console.log(e);
                    });
                }
            });
    </script>
  <body>
    <div id="notation"></div>
  </body>
</html>